////
/// @group o-forms
/// @link http://registry.origami.ft.com/components/o-forms
////

@mixin oFormsGroupContainer($class: 'o-forms') {
	margin: 0 0 #{-$_o-forms-spacing};

	.#{$class}__label {
		width: 100%; // We do not use display:block to maintain consistent margins (not collapsed).
		box-sizing: border-box;
		margin: $_o-forms-checkbox-legend-spacing $_o-forms-checkbox-horizontal-spacing $_o-forms-spacing 0; // margins do not collapse, making the space between checkbox/radio inputs a little larger
		&:last-of-type {
			margin-right: 0;
		}
	}

	&--inline {
		.#{$class}__label,
		.#{$class}__label {
			width: auto;
		}
	}
}

/// Radio and checkboxes
///
/// Draws a fake control (radio or checkbox) using pseudo-elements
///
/// @param {map} $selectors [(label: '.o-forms__label')]
@mixin oFormsRadioCheckbox($class: 'o-forms') {
	position: absolute;
	opacity: 0; // better than display: none as it allows tabbing

	& + .#{$class}__label {
		@include _oFormsRadioCheckboxLabel();
	}

	& + .#{$class}__label::before {
		@include oColorsFor(o-forms-field-focus);
		position: absolute;
		top: 0;
		left: 0;
		width: $_o-forms__radiocheckbox-default-size;
		height: $_o-forms__radiocheckbox-default-size;
		border: 1px solid oColorsGetColorFor(o-forms-field-standard, border);
		box-sizing: border-box;
		content: '';
		background-color: oColorsGetColorFor(o-forms-field-standard, background);
		transition: all 0.1s ease-in;
	}

	& + .#{$class}__label::after {
		content: '';
		opacity: 0;
		position: absolute;
		top: 0;
		left: 0;
		transition: 0.1s opacity ease-in;
	}

	&:checked + .#{$class}__label::after {
		opacity: 1;
	}

	&:disabled + .#{$class}__label {
		opacity: 0.4;
		cursor: default;
	}
}

@mixin oFormsRadioCheckboxRight($class: 'o-forms') {
	& + .#{$class}__label {
		padding-right: $_o-forms__radiocheckbox-default-size + $_o-forms__label-padding-left;
		padding-left: 0;
		text-align: right;
	}

	& + .#{$class}__label::before,
	& + .#{$class}__label::after {
		right: 0;
		left: auto;
	}
}

@mixin oFormsRadio($class: 'o-forms') {
	& + .#{$class}__label::before {
		// Equivalent to border-radius 50%. Fixes an old WebKit bug where rounding wouldn't be applied properly
		border-radius: 9999px;
	}
	&:checked + .#{$class}__label::before {
		// Outer ring changes to teal when the radio button is checked
		border: 1px solid oColorsGetColorFor(o-forms-checkbox-radio-checked, background);
	}
	& + .#{$class}__label::after {
		background-color: oColorsGetColorFor(o-forms-checkbox-radio-checked, background);
		// Equivalent to border-radius 50%. Fixes an old WebKit bug where rounding wouldn't be applied properly
		border-radius: 9999px;
		height: $_o-forms__radio-internal-default-size;
		width: $_o-forms__radio-internal-default-size;
		left: ($_o-forms__radiocheckbox-default-size - $_o-forms__radio-internal-default-size) / 2;
		top: ($_o-forms__radiocheckbox-default-size - $_o-forms__radio-internal-default-size) / 2;
	}
}

@mixin oFormsCheckbox($class: 'o-forms') {
	& + .#{$class}__label::after {
		@include oIconsGetIcon('tick', oColorsGetPaletteColor('white'), $_o-forms__radiocheckbox-default-size);
		background-color: oColorsGetColorFor(o-forms-checkbox-radio-checked, background);
	}
}
