////
/// @group Common
////

/// @access public
/// @output Styles for the main o-forms/fieldset group which contains a label/input.
@mixin oFormsGroup {
	position: relative;
	max-width: $_o-forms-field-max-width;
	margin: 0 0 $_o-forms-group-spacing; // Reset top and side margins for fieldset usage
	// reset <fieldset> defaults
	padding: 0;
	border: 0;

	// sass-lint:disable mixins-before-declarations
	@include oGridRespondTo(S) {
		padding-right: $_o-forms-padding;
		padding-left: $_o-forms-padding;
	}
	// sass-lint:enable mixins-before-declarations
}

@mixin oFormsGroupInline($class: 'o-forms') {
	max-width: $_o-forms-inline-field-max-width;
	.#{$class}__label {
		margin-bottom: 0;
	}
	.#{$class}__label + .#{$class}__additional-info {
		margin-top: 0;
		margin-bottom: 0;
	}
	// Fieldset overrides the display vaule in some browsers.
	// https://html.spec.whatwg.org/multipage/rendering.html#the-fieldset-and-legend-elements
	&:not(fieldset) {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		grid-gap: 20px;
		align-items: center;
		// IE10 - IE11 Support
		// sass-lint:disable no-vendor-prefixes
		-ms-grid-columns: 1fr 20px 1fr;
		counter-reset: inline-item; // 0
		> .o-forms__inline-item {
			counter-increment: inline-item;
			-ms-grid-row: counter(inline-item);
			-ms-grid-row-align: center;
			-ms-grid-column: 1;
			> .o-forms__label {
				max-width: 100%;
			}
		}
		> .o-forms__inline-item:nth-child(even) {
			-ms-grid-column: 3;
		}
		// sass-lint:enable no-vendor-prefixes
	}
}

/// @access public
/// @output Basic styles shared between input, textarea, select etc.
@mixin oFormsCommonFieldBase {
	@include oBrandConfigureFor('o-forms') {
		@include oTypographySize($_o-forms-typography-scale-regular);
		color: oBrandGet('field-standard-text');
		border-color: oBrandGet('field-standard-border');
		background-color: oBrandGet('field-standard-background');
		box-sizing: border-box;
		width: 100%;
		max-width: $_o-forms-field-max-width;
		min-height: $_o-forms-field-default-height;
		padding: $_o-forms-field-default-padding-top $_o-forms-field-default-padding-leftright $_o-forms-field-default-padding-bottom;
		border: $_o-forms-field-border;
		border-radius: $_o-forms-field-border-radius;
		background-clip: padding-box;
		font-family: $o-forms-font-family;
		outline: none;
		transition: 0.15s box-shadow ease-in;
		appearance: none;

		&:focus {
			@include oFormsCommonFieldFocus;
		}

		&:disabled {
			@include oFormsCommonFieldDisabled;
		}

		&::placeholder {
			color: oBrandGet('field-placholder-text');
		}
	}
}

/// @access public
/// @output Shared focus state styles.
@mixin oFormsCommonFieldFocus {
	@include oBrandConfigureFor('o-forms') {
		border-color: oBrandGet('field-focus-border');
		box-shadow: 0 0 0 2px $o-normalise-focus-color;
	}
}

/// @access public
/// @output Shared disabled state styles.
@mixin oFormsCommonFieldDisabled {
	@include oBrandConfigureFor('o-forms') {
		color: oBrandGet('field-disabled-text');
		border-color: oBrandGet('field-disabled-border');
		background-color: oBrandGet('field-disabled-background');
		cursor: default;
	}
}

/// @access public
/// @output Shared invalid state styles.
@mixin oFormsCommonFieldInvalid {
	@include oBrandConfigureFor('o-forms') {
		&:not(:disabled) {
			color: oBrandGet('field-invalid-text');
			border-color: oBrandGet('field-invalid-border');
			background-color: oBrandGet('field-invalid-background');

			&:focus {
				border-color: oBrandGet('field-invalid-border');
				outline-offset: 0;
			}
		}
	}
}

/// @access public
/// @output Shared valid state styles.
@mixin oFormsCommonFieldValid {
	@include oBrandConfigureFor('o-forms') {
		&:not(:disabled) {
        	color: oBrandGet('field-valid-text');
        	border-color: oBrandGet('field-valid-border');
			background-color: rgba(oBrandGet('field-valid-background'), 0.05);
			&:focus {
				border-color: oBrandGet('field-valid-border');
				outline-offset: 0;
			}
		}
	}
}

/// @access public
/// @output Shared styles to make an input smaller, e.g select or text.
@mixin oFormsCommonSmall {
	padding-top: 0;
	padding-bottom: 0;
	min-height: $_o-forms-field-small-height;
	background-size: $_o-forms-select-small-iconsize $_o-forms-select-small-iconsize;
	background-position-x: 99%; // Make the smaller icon size visually match the padding on the left of the input
	line-height: $_o-forms-field-small-height - ($_o-forms-field-border-width * 2);
}
